# CL-PDFViewer 

CL-PDFViewer is an pdf viewer designed to assist Master's students in Computational Linguistics with an enhanced reading experience for course materials. 

It's modified from the web app [DocMind](https://github.com/3Alan/DocsMind)


## Introduction


Computational Linguistics (CL) is an interdisciplinary field of study, uniting the study of linguistics and informatics. Hence students from an international Master's program in CL can have a diverse range of academic grounds.  
While this diversity is beneficial, it also introduces challenges: Some students might struggle with specific terminologies because of their varied academic backgrounds, and non-native English speakers might find it difficult to easily comprehend and work through materials that are primarily in English.

This project serves as an attempt to address such issues by utilizing the GPT4, online EN dictionary and few-shot learning. It is designed to help students understand course materials more effectively. 

If a student encounters an unknown term, such as "eigenvalue," while reading a document, CL-PDFViewer allows them to right-click the term and select "Explain text" to get a tailored definition in a chat window, optimized for their undergraduate major, for example, General Linguistics. 
They can also select "Show an example" for additional examples of words or phrases to deepen understanding. 
The tool also has a "Detect jargons" option that identifies potentially confusing terminology based on the student's background, and a "Simplify text" option which rephrases complex sentences to be more accessible for non-native speakers. 
Finally, CL-PDFViewer lets students send text to the chat window to create and explore their specific inquiries, enabling a personalized learning experience.

## Limitations

The tool is heavily dependent on GPT-4 and students should be aware that answers generated by large language models (LLMs) like this can "hallucinate" facts. 
Efforts have been made to guide the model towards the more desired and reliable outcomes by using detailed prompts and external dictionary, but the results are not guaranteed to always align with the goals. 
As a results, students are suggested to exercise caution and skepticism when using the tool, especially for understanding new methods or terminologies such as "gated fusion network," which may not be reliably recognized by the model. 

In short, the tool might be more reliable for understanding common terms, such as "weights" or "context-free grammar," that are likely to be introduced in earlier lectures or foundational courses. When it comes to the last few lectures or recent papers discussed in seminars, students should be particularly skeptical of the results produced by the tool.

## Functions available 

- Explain text
- Show an example
- Detect terminology 
- Simplify text
- Add to chat (for follow-up or open questions)


## How to Run It Locally

#### Create .env

Create a `.env` file and copy the contents of `.env.example` to modify it.

#### Run Frontend UI

1. Install dependencies

```
yarn
```

2. Run app

```
yarn dev
```

#### Run Backend Services

you need a python environment

1. Create virtual environment

```
cd server
python -m venv .venv
```

2. Active virtual environment

```
. .venv/bin/activate
```

3. Install dependencies

```
pip install -r requirements.txt
```

4. Create db under static direction

```
mkdir -p server/static/db
```

5. Run Services

```
flask run --reload --port=8080
```

## TODO

- [ ] Add support for open-source LLMs
- [ ] Add support for translation


## SRC Files Description

In case other developers are interested in contriubting to the project, this session offers some dev background and introduces the existing structure.

As mentioned above, this tool is adapted from DocsMind. DocsMind provides the layout of the web app and other features designed to assist users in interacting with PDF files. However, since our project's goal is more specific, so some features have been removed from DocsMind. Here are the removed features and the reasons behind that decisions:

- **Whole document summarization** was excluded because it demands extensive token processing, which can be costly when using gpt4-api. Furthermore, currently CL-PdfViewer favors more that students should engage in deriving the main ideas from course materials themselves. It aims to assist students during their reading primarily through "local context processing."
- **PDF Inexing** was removed because, in the projectâ€™s context, users select text, and the chatbot provides answers directly related to that selection, the link back to the original PDF file is less needed.
- **Markdown processing** was also removed for now to prevent crashing, as currently the tool only finished support for pdf interaction.

Note that the developer was relatively inexperienced with web development skills at the time of creating the project, opted for a simplified implementation approach. So the project is not designed to function as a full-fledged web application and is instead intended to be run locally. For example, it uses local memory to store dialog history for queries sent from the client-side. This solution is non-scalable and insufficient for broader use-cases.

The following part offers a breakdown of newly developed features and their implementation locations in the project:

```
- server side
  - app.py: 
    - fetch results using the gpt4 api
  - gpt4_wrapper:
    - HistoryManager
- client side
  - src/App.tsx: determine the layout of the website, also handle the information shared between the pdfViewer and the chatWindow, including the pdf content, openai key and user major info
  - src/component/pdfViewer: handle pdf information extraction, enable user to select the text
  - src/components/chatWindow: handle the message list that needs to be presented in the chat window, prepare the neccessary information used by prompt
  - src/components/settingModal: enable user to set their major
```

## DEMO video

If the browser does not support the video tag, please check the files under `example` dir.

- How to add apiKey and major:


<video width="320" height="240" controls>
  <source src="example/add_key.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

- Demo

<video width="320" height="240" controls>
  <source src="example/demo.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

